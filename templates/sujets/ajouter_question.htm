<form class="form-horizontal" method="post" action="ajouter_question/reception">
<check if="{{isset(@PARAMS.id)}}">
    <true>
        <!-- Si il y a un sujet sélectionner, un affiche le nom de du sujet. -->
        <h2>Ajouter un question</h2>
        <h4>Sujet n°{{ @PARAMS.id }}, question n°{{ @num_question }}</h4>
    </true>
    <false>
        <!-- Si il n'y a pas de sujet sélectionner, un affiche la liste des matières à séletionner. -->
        <h2>Proposer une question indépendante</h2>
        <div class="form-group">
            <label for="matiere">Matière : </label>
            <select name="matiere">
                {{@SESSION.user->matieresSuiviesEnOption(@f3)}}
            </select>
        </div>
    </false>
</check>

    

    <!-- Affichage de la question -->
    <div class="form-group">
        <button onclick="focused_input='question'" data-toggle="modal" data-target=".modal_ajout" class="btn btn-default" type="button">
            <span class="glyphicon glyphicon-edit"></span>
        </button>
        <label for="question">Question : </label>
        <div class="container">
            <div class="container" border="2px solid black" id="question"></div>
        </div>
    </div>

    <!-- Affichage des 5 items -->
    <repeat group="{{ array(1,2,3,4,5) }}" value="{{ @num_item }}" >
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-10">
                    <div class="form-group-sm">
                        <button onclick="focused_input='item{{ @num_item }}'" data-toggle="modal" data-target=".modal_ajout" class="btn btn-default btn-sm" type="button">
                            <span class="glyphicon glyphicon-edit"></span>
                        </button>
                        <label for="item{{ @num_item }}" class="control-label">Item {{ @num_item }} : </label>
                        <div id="item{{ @num_item }}" class="container"></div>
                    </div>
                    <div class="form-group-sm">
                        <button onclick="focused_input='correction{{ @num_item }}'" data-toggle="modal" data-target=".modal_ajout" class="btn btn-default btn-sm" type="button">
                            <span class="glyphicon glyphicon-edit"></span>
                        </button>
                        <label for="correction{{ @num_item }}" class="control-label">Correction {{ @num_item }} : </label>
                        <div id="correction{{ @num_item }}" class="container"></div>
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="radio">
                        <label>
                            <input checked type="radio" name="reponse{{ @num_item }}" id="reponse{{ @num_item }}1" value="1"/>
                            Vrai
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="reponse{{ @num_item }}" id="reponse{{ @num_item }}0" value="0"/>
                            Faux
                        </label>
                    </div>
                </div>
            </div>
        </div>

    </repeat>
    <button class="btn btn-default" type="submit">Enregistrer</button>
</form>

<!-- Fenêtre d'ajout d'équation -->
<div class="modal fade modal_ajout" role="dialog" aria-labelledby="editer-champ" aria-hidden="true">
    <include href="templates/editor/editor.htm" />
</div>

<script type='text/javascript' src='{{ @root }}/js/tinymce/tinymce.min.js'></script>
<script type="text/javascript">
    var focused_input;
    
    tinymce.init({
        selector: "#editeur",
        plugins: "eqneditor",
        toolbar: "undo redo | bold italic | bullist numlist | eqneditor "
    });

    function enregistrer() {

        
        if(id == 0) {
            // id = 0 indique qu'il s'agit d'une nouvelle équation à stocker
            $.post('{{@root}}ajax/equation/add',
                {
                    eqn: eqn,
                    nom: '',
                    id: id,
                },
                function (data) { // une fois qu'on a la valeur de retour
                    if(data != '') alert('Erreur : ' + data);
                    maj_equations();
            });
        }
    }
    
</script>
